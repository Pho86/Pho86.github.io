import React, { useRef } from "react";
import { motion, useInView } from "motion/react";

export default function AnimateSignature({
  onAnimationEnd,
}: {
  onAnimationEnd?: () => void;
}) {
  const ref = useRef(null);
  const isVisible = useInView(ref);
  return (
    <motion.div ref={ref} className=" w-full flex justify-center items-center">
      <motion.svg
        // SVG properties
        width="500"
        height="100"
        initial={{ scale: 3 }}
        animate={{ scale: isVisible ? 3 : 5 }}
        transition={{ duration: 3, delay: 3 }}
        viewBox="0 0 555 322"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onLayoutAnimationComplete={onAnimationEnd}
        layoutRoot
      >
        <motion.path
          // Path properties
          d="M2 202C18.3336 175.924 40.7894 147.859 49.1111 117.556C52.3287 105.839 51.9292 92.7009 52 80.6667C52.1165 60.8656 53.0732 44.7738 59.1111 26.1111C63.8632 11.4229 74.0796 2 90.1111 2C113.105 2 105.254 44.2079 102 58C97.4681 77.2064 83.106 82 66 82C64.867 82 57.149 81.1136 56.4444 82.4444C54.1397 86.7978 55.9685 97.0488 56 101.556C56.073 111.994 56.7443 122.307 58 132.667C59.2792 143.22 65.7124 170.974 79.8889 171.889C110.898 173.889 130.236 158.304 146.889 134C168.549 102.388 168.474 67.7998 164 30.8889C162.497 18.4921 158.818 14.2034 149.222 7.11111C140.893 0.954407 140.082 5.83622 140 14.8889C139.573 61.8762 137.401 108.62 136 155.556C135.637 167.708 129.997 180.74 128.111 193C125.851 207.69 138.671 171.668 139.556 169.556C144.184 158.51 147.695 134.878 161.111 130C179.075 123.468 185.949 138.143 192 152.444C194.918 159.342 200.109 192 208 192C225.038 192 234.57 180.8 237.556 162.889C239.148 153.336 240 143.784 240 134.111C240 126.523 236 130.388 236 136.889C236 155.406 241.495 170.028 251.111 184.889C260.851 199.941 281.57 181.799 289.111 174.778C330.848 135.919 332 83.095 332 29.5556C332 22.3704 332 15.1852 332 8C332 -4.81257 328.547 33.3923 327 46.1111C324.396 67.5244 320.206 88.4744 318.444 110C317.159 125.71 311.294 140.395 310.111 155.778C308.974 170.556 309.161 188.863 319 200.889C326.385 209.915 342.351 201.922 348.111 195.778C362.793 180.117 366 156.723 366 136C366 134.963 366.115 131.858 366 132.889C364.699 144.595 362.978 156.139 361.111 167.778C359.43 178.261 353.201 202.042 358.444 213.111C359.569 215.484 367.912 213.585 369.333 213.111C383.56 208.369 393.491 191.64 399.889 179.111C410.545 158.243 421.682 138.594 430.889 117.111C436.318 104.442 412.354 137.543 403.778 148.333C378.336 180.341 354.837 213.851 329.333 245.778C305.213 275.973 269.282 302.804 232.444 315.556C228.783 316.823 224.301 318.984 220.444 319.556C215.585 320.275 224.556 300.57 224.667 300.333C250.562 244.947 306.553 201.636 357.333 170.889C468.82 103.385 598.601 84.1554 726 70"
          stroke="black"
          strokeWidth="6"
          strokeLinecap="round"
          initial="hidden"
          animate="visible"
          variants={{
            hidden: {
              opacity: 0,
              pathLength: 0,
            },
            visible: {
              opacity: 1,
              pathLength: 1,
              transition: {
                pathLength: {
                  delay: 0.2,
                  duration: 2,
                  bounce: 0.4,
                  ease: "easeInOut",
                },
                opacity: { duration: 1 },
              },
            },
          }}
          onAnimationComplete={onAnimationEnd}
          layout
        />
        {/* Include other paths if your signature has multiple parts */}
      </motion.svg>
    </motion.div>
  );
}
